<!DOCTYPE html>
<html lang="en">

<head>
  <title>Replace Me With Your Lab Page</title>
  <link rel="stylesheet" type="text/css" href="./styles.css">
</head>

<body>
  <div class="container">
    <div class="wrapper">
      <div class="header">Replace Me With Your Lab Page</div>
      <div class="content"></div>
      <div class="footer"></div>
    </div>
  </div>
  <script>
    fetch('/api') // Rather than fetching from PG County, we're going to fetch from our own server.
      .then(res => res.json())
      .then(res => {
        const chart = new CanvasJS.Chart("chartContainer", {
	theme: "dark2",
	exportFileName: "Doughnut Chart",
	exportEnabled: true,
	animationEnabled: true,
	title:{
		text: "Percentage Distribution Of Different Categories Of Food Serving Establishments"
	},
	legend:{
		cursor: "pointer",
		itemclick: explodePie
	},
	data: [{
		type: "doughnut",
		innerRadius: 75,
		showInLegend: true,
		toolTipContent: "<b>{name}</b>: {y} (#percent%)",
		indexLabel: "{name} - #percent%",
		dataPoints: results,
	}]
});
chart.render();

 function explodePie (e) {
	if(typeof (e.dataSeries.dataPoints[e.dataPointIndex].exploded) === "undefined" || !e.dataSeries.dataPoints[e.dataPointIndex].exploded) {
		e.dataSeries.dataPoints[e.dataPointIndex].exploded = true;
	} else {
		e.dataSeries.dataPoints[e.dataPointIndex].exploded = false;
	}
	e.chart.render();
        // Here's where your chart code should go.
      });
  </script>
</body>

</html>